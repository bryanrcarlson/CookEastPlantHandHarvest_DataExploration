# Set WD, define constants
setwd("C:\\OneDrive\\OneDrive - Washington State University (email.wsu.edu)\\Projects\\CookEastPlantHandHarvest\\1999-2016\\Working\\R")
area.harvested <- 2.4384
harvest.year <- 2015
source("graphing-funcs.R")
# Read input data
strips <- readOGR("Working/CookEastStrips2013", "Field_Plan_Final")
boundary <- readOGR("Input/CookEastArea", "CafCookEastArea")
d <- read.csv("Input/HY2015GP_GrainWeightOnly_171018.csv", stringsAsFactors = TRUE)
# Original strips polygon of Cook East has area with no georef points (and no yield), so remove them
georef.only <- raster::intersect(boundary, strips)
#GB
map_yield(d, area.harvested, georef.only,
extract_georef_field_and_strip(NULL, c(6), c(1,4,5,6,7,8), georef.only),
harvest.year, "GB")
summary(d2016[d2016$Crop == "SC", ])
map_yield(d2016, area.harvested, georef.only,
extract_georef_field_and_strip(c(1,2,3,4,5,6), c(1,2,3,4,5,6), c(1, 2), georef.only),
harvest.year, "SC")
setwd("C:\\OneDrive\\OneDrive - Washington State University (email.wsu.edu)\\Projects\\CookEastPlantHandHarvest\\1999-2016\\Working\\R")
area.harvested <- 2.4384
source("graphing-funcs.R")
# Load input polygons
strips <- readOGR("Working/CookEastStrips2013", "Field_Plan_Final")
boundary <- readOGR("Input/CookEastArea", "CafCookEastArea")
# Original strips polygon of Cook East has area with no georef points (and no yield), so remove them
georef.only <- raster::intersect(boundary, strips)
summary(d2016[d2016$Crop == "SC", ])
map_yield(d2016, area.harvested, georef.only,
extract_georef_field_and_strip(c(1,2,3,4,5,6), c(1,2,3,4,5,6), c(1, 2), georef.only),
harvest.year, "SC")
source('C:/OneDrive/OneDrive - Washington State University (email.wsu.edu)/Projects/CookEastPlantHandHarvest/1999-2016/Working/R/graphing-funcs.R')
setwd("C:\\OneDrive\\OneDrive - Washington State University (email.wsu.edu)\\Projects\\CookEastPlantHandHarvest\\1999-2016\\Working\\R")
area.harvested <- 2.4384
source("graphing-funcs.R")
# Load input polygons
strips <- readOGR("Working/CookEastStrips2013", "Field_Plan_Final")
boundary <- readOGR("Input/CookEastArea", "CafCookEastArea")
# Original strips polygon of Cook East has area with no georef points (and no yield), so remove them
georef.only <- raster::intersect(boundary, strips)
summary(d2016[d2016$Crop == "WW", ])
map_yield(d2016, area.harvested, georef.only,
extract_georef_field_and_strip(NULL, NULL, c(1,2,3,4,5,6,7,8), georef.only),
harvest.year, "WW")
summary(d2016[d2016$Crop == "SC", ])
map_yield(d2016, area.harvested, georef.only,
extract_georef_field_and_strip(c(1,2,3,4,5,6), c(1,2,3,4,5,6), c(1, 2), georef.only),
harvest.year, "SC")
source('C:/OneDrive/OneDrive - Washington State University (email.wsu.edu)/Projects/CookEastPlantHandHarvest/1999-2016/Working/R/graphing-funcs.R')
# Set WD, define constants
setwd("C:\\OneDrive\\OneDrive - Washington State University (email.wsu.edu)\\Projects\\CookEastPlantHandHarvest\\1999-2016\\Working\\R")
area.harvested <- 2.4384
harvest.year <- 2015
source("graphing-funcs.R")
# Read input data
strips <- readOGR("Working/CookEastStrips2013", "Field_Plan_Final")
boundary <- readOGR("Input/CookEastArea", "CafCookEastArea")
d <- read.csv("Input/HY2015GP_GrainWeightOnly_171018.csv", stringsAsFactors = TRUE)
# Original strips polygon of Cook East has area with no georef points (and no yield), so remove them
georef.only <- raster::intersect(boundary, strips)
#GB
map_yield(d, area.harvested, georef.only,
extract_georef_field_and_strip(NULL, c(6), c(1,4,5,6,7,8), georef.only),
harvest.year, "GB")
summary(d)
View(d)
source('C:/OneDrive/OneDrive - Washington State University (email.wsu.edu)/Projects/CookEastPlantHandHarvest/1999-2016/Working/R/graphing-funcs.R')
source('C:/OneDrive/OneDrive - Washington State University (email.wsu.edu)/Projects/CookEastPlantHandHarvest/1999-2016/Working/R/graphing-funcs.R')
# Set WD, define constants
setwd("C:\\OneDrive\\OneDrive - Washington State University (email.wsu.edu)\\Projects\\CookEastPlantHandHarvest\\1999-2016\\Working\\R")
area.harvested <- 2.4384
harvest.year <- 2015
source("graphing-funcs.R")
# Read input data
strips <- readOGR("Working/CookEastStrips2013", "Field_Plan_Final")
boundary <- readOGR("Input/CookEastArea", "CafCookEastArea")
d <- read.csv("Input/HY2015GP_GrainWeightOnly_171018.csv", stringsAsFactors = TRUE)
# Original strips polygon of Cook East has area with no georef points (and no yield), so remove them
georef.only <- raster::intersect(boundary, strips)
#GB
map_yield(d, area.harvested, georef.only,
extract_georef_field_and_strip(NULL, c(6), c(1,4,5,6,7,8), georef.only),
harvest.year, "GB")
View(d)
# Set WD, define constants
setwd("C:\\OneDrive\\OneDrive - Washington State University (email.wsu.edu)\\Projects\\CookEastPlantHandHarvest\\1999-2016\\Working\\R")
area.harvested <- 2.4384
harvest.year <- 2013
source("graphing-funcs.R")
# Read input data
strips <- readOGR("Working/CookEastStrips2013", "Field_Plan_Final")
boundary <- readOGR("Input/CookEastArea", "CafCookEastArea")
d <- read.csv("Input/HY2013GP_GrainWeightOnly_171012.csv", stringsAsFactors = TRUE)
# Original strips polygon of Cook East has area with no georef points (and no yield), so remove them
georeff.only <- raster::intersect(boundary, strips)
#GB
map_yield(d, area.harvested, georeff.only,
extract_georef_field_and_strip(c(5), c(1,2,3,4), NULL, georeff.only),
harvest.year, "GB")
View(d)
d1 <- d[!(is.na(d$GrainWeightWet)), ]
View(d1)
d2 <- d[!(is.na(d$GrainWeightWet) || d$GrainWeightWet == ""), ]
source('C:/OneDrive/OneDrive - Washington State University (email.wsu.edu)/Projects/CookEastPlantHandHarvest/1999-2016/Working/R/graphing-funcs.R')
# Set WD, define constants
setwd("C:\\OneDrive\\OneDrive - Washington State University (email.wsu.edu)\\Projects\\CookEastPlantHandHarvest\\1999-2016\\Working\\R")
area.harvested <- 2.4384
harvest.year <- 2013
source("graphing-funcs.R")
# Read input data
strips <- readOGR("Working/CookEastStrips2013", "Field_Plan_Final")
boundary <- readOGR("Input/CookEastArea", "CafCookEastArea")
d <- read.csv("Input/HY2013GP_GrainWeightOnly_171012.csv", stringsAsFactors = TRUE)
# Original strips polygon of Cook East has area with no georef points (and no yield), so remove them
georeff.only <- raster::intersect(boundary, strips)
#GB
map_yield(d, area.harvested, georeff.only,
extract_georef_field_and_strip(c(5), c(1,2,3,4), NULL, georeff.only),
harvest.year, "GB")
# Set WD, define constants
setwd("C:\\OneDrive\\OneDrive - Washington State University (email.wsu.edu)\\Projects\\CookEastPlantHandHarvest\\1999-2016\\Working\\R")
area.harvested <- 2.4384
harvest.year <- 2013
source("graphing-funcs.R")
# Read input data
strips <- readOGR("Working/CookEastStrips2013", "Field_Plan_Final")
boundary <- readOGR("Input/CookEastArea", "CafCookEastArea")
d <- read.csv("Input/HY2013GP_GrainWeightOnly_171012.csv", stringsAsFactors = TRUE)
# Original strips polygon of Cook East has area with no georef points (and no yield), so remove them
georeff.only <- raster::intersect(boundary, strips)
#GB
map_yield(d, area.harvested, georeff.only,
extract_georef_field_and_strip(c(5), c(1,2,3,4), NULL, georeff.only),
harvest.year, "GB")
d1 <- d[!(is.na(d$GrainWeightWet)), ]
source('C:/OneDrive/OneDrive - Washington State University (email.wsu.edu)/Projects/CookEastPlantHandHarvest/1999-2016/Working/R/graphing-funcs.R')
source('C:/OneDrive/OneDrive - Washington State University (email.wsu.edu)/Projects/CookEastPlantHandHarvest/1999-2016/Working/R/graphing-funcs.R')
# Author: Bryan Carlson
# Contact: bryan.carlson@ars.usda.gov
# Purpose: Mapping and utility functions to aid in QC of hand harvested yield data
library(sp)
library(rgdal)
library(dismo)
library(gstat)
#' Creates a IDW map of yield values from grain weight
#' @param d A dataframe with grain mass data in WGS84 datum and columns: FieldID	Column	Row2	ID2	Latitude	Longitude	Year	SampleID	Crop	GrainWeightWet
#' @param area.harvested A number for the area harvested in m2, grain mass will be divided by this number to get mass/area
#' @param boundary A SpatialPolygonsDataFrame of the boundary to be analyzed
#' @param strips A SpatialPolygonsDataFrame that is composed of one or more strips of which the crops reside
#' @param harvest.year Int that for the harvest year that the data are for
#' @param crop.name Optional param, if specified the single crop will be displayed
map_yield <- function(d, area.harvested, boundary, strips, harvest.year, crop.name = "") {
# Clean data
d <- d[!(is.na(d$GrainWeightWet)), ]
if(crop.name != "" && crop.name %in% d$Crop)
{
d <- d[(d$Crop == crop.name), ]
}
# Append a column with per area yield
d['Yield'] <- d$GrainWeightWet / area.harvested
# Convert csv gain mass data to spatial points and specify the datum
dsp <- SpatialPoints(d[,6:5], proj4string=CRS("+proj=longlat +datum=WGS84 +no_defs"))
dsp <- SpatialPointsDataFrame(dsp, d)
# Project spatial data to UTM Zone 11N
TA <- CRS("+proj=utm +zone=11 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0")
dta <- spTransform(dsp, TA)
stripsta <- spTransform(strips, TA)
boundaryta <- spTransform(boundary, TA)
# Create proximity polygons, or nearest neighbor interpolation
v <- voronoi(dta)
# Confine to given boundary
ca <- aggregate(stripsta)
vca <- intersect(v, ca)
# Rasterize it
r <- raster(stripsta, res=5)
vr <- rasterize(vca, r, 'Yield')
# Inverse distance weighted interpolation
gs <- gstat(formula = Yield~1, locations=dta)
idw <- interpolate(r, gs)
idwr <- mask(idw, vr)
plot(boundaryta)
plot(idwr, col = grey.colors(n = 8, 0, 1), add = T)
# Set colors
graphCols <- c("purple", "chartreuse", "blue", "yellow", "red", "green", "sandybrown")
# Add points and polygons to figure
plot(dta, pch=21, bg=graphCols[dta$Crop], col=graphCols[dta$Crop], cex=0.8, add=T)
lines(stripsta)
# Print legend
legend(x="topright", legend = levels(dta$Crop), col=graphCols, pch=1)
title(paste("Cook East", crop.name, "Yield for HY", harvest.year))
mtext(paste("Area harvested = ", toString(area.harvested), ", Crop = ", crop.name, " units = g/m2"))
}
#' Extracts polygons that correspond to specified fields and strips
#' @param a.strips A list of numbers that correspond to the strip ID in field A that are to be included
#' @param b.strips A list of numbers that correspond to the strip ID in field B that are to be included
#' @param c.strips A list of numbers that correspond to the strip ID in field C that are to be included
#' @param polygons A SpatialPolygonsDataFrame that contains all strips and fields in CookEast
extract_georef_field_and_strip <- function(a.strips, b.strips, c.strips, polygons) {
strips <- polygons[
(polygons$Field == "A" & polygons$Strip %in% a.strips) |
(polygons$Field == "B" & polygons$Strip %in% b.strips) |
(polygons$Field == "C" & polygons$Strip %in% c.strips), ]
}
# Set WD, define constants
setwd("C:\\OneDrive\\OneDrive - Washington State University (email.wsu.edu)\\Projects\\CookEastPlantHandHarvest\\1999-2016\\Working\\R")
area.harvested <- 2.4384
harvest.year <- 2013
source("graphing-funcs.R")
# Read input data
strips <- readOGR("Working/CookEastStrips2013", "Field_Plan_Final")
boundary <- readOGR("Input/CookEastArea", "CafCookEastArea")
d <- read.csv("Input/HY2013GP_GrainWeightOnly_171012.csv", stringsAsFactors = TRUE)
# Original strips polygon of Cook East has area with no georef points (and no yield), so remove them
georeff.only <- raster::intersect(boundary, strips)
#GB
map_yield(d, area.harvested, georeff.only,
extract_georef_field_and_strip(c(5), c(1,2,3,4), NULL, georeff.only),
harvest.year, "GB")
map_yield(d1, area.harvested, georeff.only,
extract_georef_field_and_strip(c(5), c(1,2,3,4), NULL, georeff.only),
harvest.year, "GB")
View(d1)
summary(d1)
source('C:/OneDrive/OneDrive - Washington State University (email.wsu.edu)/Projects/CookEastPlantHandHarvest/1999-2016/Working/R/graphing-funcs.R')
map_yield(d, area.harvested, georeff.only,
extract_georef_field_and_strip(c(5), c(1,2,3,4), NULL, georeff.only),
harvest.year, "GB")
setwd("C:\\OneDrive\\OneDrive - Washington State University (email.wsu.edu)\\Projects\\CookEastPlantHandHarvest\\1999-2016\\Working\\R")
area.harvested <- 2.4384
harvest.year <- 2013
source("graphing-funcs.R")
# Read input data
strips <- readOGR("Working/CookEastStrips2013", "Field_Plan_Final")
boundary <- readOGR("Input/CookEastArea", "CafCookEastArea")
d <- read.csv("Input/HY2013GP_GrainWeightOnly_171012.csv", stringsAsFactors = TRUE)
# Original strips polygon of Cook East has area with no georef points (and no yield), so remove them
georeff.only <- raster::intersect(boundary, strips)
#GB
map_yield(d, area.harvested, georeff.only,
extract_georef_field_and_strip(c(5), c(1,2,3,4), NULL, georeff.only),
harvest.year, "GB")
source('C:/OneDrive/OneDrive - Washington State University (email.wsu.edu)/Projects/CookEastPlantHandHarvest/1999-2016/Working/R/graphing-funcs.R')
setwd("C:\\OneDrive\\OneDrive - Washington State University (email.wsu.edu)\\Projects\\CookEastPlantHandHarvest\\1999-2016\\Working\\R")
area.harvested <- 2.4384
harvest.year <- 2013
source("graphing-funcs.R")
# Read input data
strips <- readOGR("Working/CookEastStrips2013", "Field_Plan_Final")
boundary <- readOGR("Input/CookEastArea", "CafCookEastArea")
d <- read.csv("Input/HY2013GP_GrainWeightOnly_171012.csv", stringsAsFactors = TRUE)
# Original strips polygon of Cook East has area with no georef points (and no yield), so remove them
georeff.only <- raster::intersect(boundary, strips)
#GB
map_yield(d, area.harvested, georeff.only,
extract_georef_field_and_strip(c(5), c(1,2,3,4), NULL, georeff.only),
harvest.year, "GB")
source('C:/OneDrive/OneDrive - Washington State University (email.wsu.edu)/Projects/CookEastPlantHandHarvest/1999-2016/Working/R/graphing-funcs.R')
setwd("C:\\OneDrive\\OneDrive - Washington State University (email.wsu.edu)\\Projects\\CookEastPlantHandHarvest\\1999-2016\\Working\\R")
area.harvested <- 2.4384
harvest.year <- 2013
source("graphing-funcs.R")
# Read input data
strips <- readOGR("Working/CookEastStrips2013", "Field_Plan_Final")
boundary <- readOGR("Input/CookEastArea", "CafCookEastArea")
d <- read.csv("Input/HY2013GP_GrainWeightOnly_171012.csv", stringsAsFactors = TRUE)
# Original strips polygon of Cook East has area with no georef points (and no yield), so remove them
georeff.only <- raster::intersect(boundary, strips)
#GB
map_yield(d, area.harvested, georeff.only,
extract_georef_field_and_strip(c(5), c(1,2,3,4), NULL, georeff.only),
harvest.year, "GB")
# Set WD, define constants
setwd("C:\\OneDrive\\OneDrive - Washington State University (email.wsu.edu)\\Projects\\CookEastPlantHandHarvest\\1999-2016\\Working\\R")
area.harvested <- 2.4384
harvest.year <- 2013
source("graphing-funcs.R")
# Read input data
strips <- readOGR("Working/CookEastStrips2013", "Field_Plan_Final")
boundary <- readOGR("Input/CookEastArea", "CafCookEastArea")
d <- read.csv("Input/HY2013GP_GrainWeightOnly_171020.csv", stringsAsFactors = TRUE)
# Original strips polygon of Cook East has area with no georef points (and no yield), so remove them
georeff.only <- raster::intersect(boundary, strips)
#GB
map_yield(d, area.harvested, georeff.only,
extract_georef_field_and_strip(c(5), c(1,2,3,4), NULL, georeff.only),
harvest.year, "GB")
source('C:/OneDrive/OneDrive - Washington State University (email.wsu.edu)/Projects/CookEastPlantHandHarvest/1999-2016/Working/R/graphing-funcs.R')
# Set WD, define constants
setwd("C:\\OneDrive\\OneDrive - Washington State University (email.wsu.edu)\\Projects\\CookEastPlantHandHarvest\\1999-2016\\Working\\R")
area.harvested <- 2.4384
harvest.year <- 2013
source("graphing-funcs.R")
# Read input data
strips <- readOGR("Working/CookEastStrips2013", "Field_Plan_Final")
boundary <- readOGR("Input/CookEastArea", "CafCookEastArea")
d <- read.csv("Input/HY2013GP_GrainWeightOnly_171020.csv", stringsAsFactors = TRUE)
# Original strips polygon of Cook East has area with no georef points (and no yield), so remove them
georeff.only <- raster::intersect(boundary, strips)
#GB
map_yield(d, area.harvested, georeff.only,
extract_georef_field_and_strip(c(5), c(1,2,3,4), NULL, georeff.only),
harvest.year, "GB")
source('C:/OneDrive/OneDrive - Washington State University (email.wsu.edu)/Projects/CookEastPlantHandHarvest/1999-2016/Working/R/graphing-funcs.R')
source('C:/OneDrive/OneDrive - Washington State University (email.wsu.edu)/Projects/CookEastPlantHandHarvest/1999-2016/Working/R/graphing-funcs.R')
# Author: Bryan Carlson
# Contact: bryan.carlson@ars.usda.gov
# Purpose: Mapping and utility functions to aid in QC of hand harvested yield data
library(sp)
library(rgdal)
library(dismo)
library(gstat)
#' Creates a IDW map of yield values from grain weight
#' @param data A dataframe with grain mass data in WGS84 datum and columns: FieldID	Column	Row2	ID2	Latitude	Longitude	Year	SampleID	Crop	GrainWeightWet
#' @param area.harvested A number for the area harvested in m2, grain mass will be divided by this number to get mass/area
#' @param boundary A SpatialPolygonsDataFrame of the boundary to be analyzed
#' @param strips A SpatialPolygonsDataFrame that is composed of one or more strips of which the crops reside
#' @param harvest.year Int that for the harvest year that the data are for
#' @param crop.name Optional param, if specified the single crop will be displayed
map_yield <- function(data, area.harvested, boundary, strips, harvest.year, crop.name = "") {
# Clean data
d <- data[!(is.na(data$GrainWeightWet)), ]
if(crop.name != "" && crop.name %in% d$Crop)
{
d <- d[(d$Crop == crop.name), ]
}
summary(d)
# Append a column with per area yield
d['Yield'] <- d$GrainWeightWet / area.harvested
# Convert csv gain mass data to spatial points and specify the datum
dsp <- SpatialPoints(d[,6:5], proj4string=CRS("+proj=longlat +datum=WGS84 +no_defs"))
dsp <- SpatialPointsDataFrame(dsp, d)
# Project spatial data to UTM Zone 11N
TA <- CRS("+proj=utm +zone=11 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0")
dta <- spTransform(dsp, TA)
stripsta <- spTransform(strips, TA)
boundaryta <- spTransform(boundary, TA)
# Create proximity polygons, or nearest neighbor interpolation
v <- voronoi(dta)
# Confine to given boundary
ca <- aggregate(stripsta)
vca <- intersect(v, ca)
# Rasterize it
r <- raster(stripsta, res=5)
vr <- rasterize(vca, r, 'Yield')
# Inverse distance weighted interpolation
gs <- gstat(formula = Yield~1, locations=dta)
idw <- interpolate(r, gs)
idwr <- mask(idw, vr)
plot(boundaryta)
plot(idwr, col = grey.colors(n = 8, 0, 1), add = T)
# Set colors
graphCols <- c("purple", "chartreuse", "blue", "yellow", "red", "green", "sandybrown")
# Add points and polygons to figure
plot(dta, pch=21, bg=graphCols[dta$Crop], col=graphCols[dta$Crop], cex=0.8, exclude=NULL, add=T)
lines(stripsta)
# Print legend
legend(x="topright", legend = levels(dta$Crop), col=graphCols, pch=1)
title(paste("Cook East", crop.name, "Yield for HY", harvest.year))
mtext(paste("Area harvested = ", toString(area.harvested), ", Crop = ", crop.name, " units = g/m2"))
}
#' Extracts polygons that correspond to specified fields and strips
#' @param a.strips A list of numbers that correspond to the strip ID in field A that are to be included
#' @param b.strips A list of numbers that correspond to the strip ID in field B that are to be included
#' @param c.strips A list of numbers that correspond to the strip ID in field C that are to be included
#' @param polygons A SpatialPolygonsDataFrame that contains all strips and fields in CookEast
extract_georef_field_and_strip <- function(a.strips, b.strips, c.strips, polygons) {
strips <- polygons[
(polygons$Field == "A" & polygons$Strip %in% a.strips) |
(polygons$Field == "B" & polygons$Strip %in% b.strips) |
(polygons$Field == "C" & polygons$Strip %in% c.strips), ]
}
# Set WD, define constants
setwd("C:\\OneDrive\\OneDrive - Washington State University (email.wsu.edu)\\Projects\\CookEastPlantHandHarvest\\1999-2016\\Working\\R")
area.harvested <- 2.4384
harvest.year <- 2013
source("graphing-funcs.R")
# Read input data
strips <- readOGR("Working/CookEastStrips2013", "Field_Plan_Final")
boundary <- readOGR("Input/CookEastArea", "CafCookEastArea")
d <- read.csv("Input/HY2013GP_GrainWeightOnly_171020.csv", stringsAsFactors = TRUE)
# Original strips polygon of Cook East has area with no georef points (and no yield), so remove them
georeff.only <- raster::intersect(boundary, strips)
#GB
map_yield(d, area.harvested, georeff.only,
extract_georef_field_and_strip(c(5), c(1,2,3,4), NULL, georeff.only),
harvest.year, "GB")
# Set WD, define constants
setwd("C:\\OneDrive\\OneDrive - Washington State University (email.wsu.edu)\\Projects\\CookEastPlantHandHarvest\\1999-2016\\Working\\R")
area.harvested <- 2.4384
harvest.year <- 2013
source("graphing-funcs.R")
# Read input data
strips <- readOGR("Working/CookEastStrips2013", "Field_Plan_Final")
boundary <- readOGR("Input/CookEastArea", "CafCookEastArea")
d2013 <- read.csv("Input/HY2013GP_GrainWeightOnly_171020.csv", stringsAsFactors = TRUE)
# Original strips polygon of Cook East has area with no georef points (and no yield), so remove them
georeff.only <- raster::intersect(boundary, strips)
#GB
map_yield(d2013, area.harvested, georeff.only,
extract_georef_field_and_strip(c(5), c(1,2,3,4), NULL, georeff.only),
harvest.year, "GB")
source('C:/OneDrive/OneDrive - Washington State University (email.wsu.edu)/Projects/CookEastPlantHandHarvest/1999-2016/Working/R/graphing-funcs.R')
source('C:/OneDrive/OneDrive - Washington State University (email.wsu.edu)/Projects/CookEastPlantHandHarvest/1999-2016/Working/R/graphing-funcs.R')
# Set WD, define constants
setwd("C:\\OneDrive\\OneDrive - Washington State University (email.wsu.edu)\\Projects\\CookEastPlantHandHarvest\\1999-2016\\Working\\R")
area.harvested <- 2.4384
harvest.year <- 2013
source("graphing-funcs.R")
# Read input data
strips <- readOGR("Working/CookEastStrips2013", "Field_Plan_Final")
boundary <- readOGR("Input/CookEastArea", "CafCookEastArea")
d2013 <- read.csv("Input/HY2013GP_GrainWeightOnly_171020.csv", stringsAsFactors = TRUE)
# Original strips polygon of Cook East has area with no georef points (and no yield), so remove them
georeff.only <- raster::intersect(boundary, strips)
#GB
map_yield(d2013, area.harvested, georeff.only,
extract_georef_field_and_strip(c(5), c(1,2,3,4), NULL, georeff.only),
harvest.year, "GB")
source('C:/OneDrive/OneDrive - Washington State University (email.wsu.edu)/Projects/CookEastPlantHandHarvest/1999-2016/Working/R/graphing-funcs.R')
# Set WD, define constants
setwd("C:\\OneDrive\\OneDrive - Washington State University (email.wsu.edu)\\Projects\\CookEastPlantHandHarvest\\1999-2016\\Working\\R")
area.harvested <- 2.4384
harvest.year <- 2013
source("graphing-funcs.R")
# Read input data
strips <- readOGR("Working/CookEastStrips2013", "Field_Plan_Final")
boundary <- readOGR("Input/CookEastArea", "CafCookEastArea")
d2013 <- read.csv("Input/HY2013GP_GrainWeightOnly_171020.csv", stringsAsFactors = TRUE)
# Original strips polygon of Cook East has area with no georef points (and no yield), so remove them
georeff.only <- raster::intersect(boundary, strips)
#GB
map_yield(d2013, area.harvested, georeff.only,
extract_georef_field_and_strip(c(5), c(1,2,3,4), NULL, georeff.only),
harvest.year, "GB")
source('C:/OneDrive/OneDrive - Washington State University (email.wsu.edu)/Projects/CookEastPlantHandHarvest/1999-2016/Working/R/graphing-funcs.R')
source('C:/OneDrive/OneDrive - Washington State University (email.wsu.edu)/Projects/CookEastPlantHandHarvest/1999-2016/Working/R/graphing-funcs.R')
# Set WD, define constants
setwd("C:\\OneDrive\\OneDrive - Washington State University (email.wsu.edu)\\Projects\\CookEastPlantHandHarvest\\1999-2016\\Working\\R")
area.harvested <- 2.4384
harvest.year <- 2013
source("graphing-funcs.R")
# Read input data
strips <- readOGR("Working/CookEastStrips2013", "Field_Plan_Final")
boundary <- readOGR("Input/CookEastArea", "CafCookEastArea")
d2013 <- read.csv("Input/HY2013GP_GrainWeightOnly_171020.csv", stringsAsFactors = TRUE)
# Original strips polygon of Cook East has area with no georef points (and no yield), so remove them
georeff.only <- raster::intersect(boundary, strips)
#GB
map_yield(d2013, area.harvested, georeff.only,
extract_georef_field_and_strip(c(5), c(1,2,3,4), NULL, georeff.only),
harvest.year, "GB")
setwd("C:\\OneDrive\\OneDrive - Washington State University (email.wsu.edu)\\Projects\\CookEastPlantHandHarvest\\1999-2016\\Working\\R")
area.harvested <- 2.4384
harvest.year <- 2015
source("graphing-funcs.R")
# Read input data
strips <- readOGR("Working/CookEastStrips2013", "Field_Plan_Final")
boundary <- readOGR("Input/CookEastArea", "CafCookEastArea")
d <- read.csv("Input/HY2015GP_GrainWeightOnly_171020.csv", stringsAsFactors = TRUE)
# Original strips polygon of Cook East has area with no georef points (and no yield), so remove them
georef.only <- raster::intersect(boundary, strips)
#GB
map_yield(d, area.harvested, georef.only,
extract_georef_field_and_strip(NULL, c(6), c(1,4,5,6,7,8), georef.only),
harvest.year, "GB")
setwd("C:\\OneDrive\\OneDrive - Washington State University (email.wsu.edu)\\Projects\\CookEastPlantHandHarvest\\1999-2016\\Working\\R")
area.harvested <- 2.4384
harvest.year <- 2015
source("graphing-funcs.R")
# Read input data
strips <- readOGR("Working/CookEastStrips2013", "Field_Plan_Final")
boundary <- readOGR("Input/CookEastArea", "CafCookEastArea")
d <- read.csv("Input/HY2015GP_GrainWeightOnly_171020.csv", stringsAsFactors = TRUE)
# Original strips polygon of Cook East has area with no georef points (and no yield), so remove them
georef.only <- raster::intersect(boundary, strips)
#GB
map_yield(d, area.harvested, georef.only,
extract_georef_field_and_strip(NULL, c(6), c(1,4,5,6,7,8), georef.only),
harvest.year, "GB")
# Set WD, define constants
setwd("C:\\OneDrive\\OneDrive - Washington State University (email.wsu.edu)\\Projects\\CookEastPlantHandHarvest\\1999-2016\\Working\\R")
area.harvested <- 2.4384
harvest.year <- 2015
source("graphing-funcs.R")
# Read input data
strips <- readOGR("Working/CookEastStrips2013", "Field_Plan_Final")
boundary <- readOGR("Input/CookEastArea", "CafCookEastArea")
d2015 <- read.csv("Input/HY2015GP_GrainWeightOnly_171020.csv", stringsAsFactors = TRUE)
# Original strips polygon of Cook East has area with no georef points (and no yield), so remove them
georef.only <- raster::intersect(boundary, strips)
#GB
map_yield(d2015, area.harvested, georef.only,
extract_georef_field_and_strip(NULL, c(6), c(1,4,5,6,7,8), georef.only),
harvest.year, "GB")
View(d2015)
d1 <- d2015[!(is.na(d2015$GrainWeightWet)), ]
summary(d1)
# Set WD, define constants
setwd("C:\\OneDrive\\OneDrive - Washington State University (email.wsu.edu)\\Projects\\CookEastPlantHandHarvest\\1999-2016\\Working\\R")
area.harvested <- 2.4384
harvest.year <- 2015
source("graphing-funcs.R")
# Read input data
strips <- readOGR("Working/CookEastStrips2013", "Field_Plan_Final")
boundary <- readOGR("Input/CookEastArea", "CafCookEastArea")
d2015 <- read.csv("Input/HY2015GP_GrainWeightOnly_171020.csv", stringsAsFactors = TRUE)
# Original strips polygon of Cook East has area with no georef points (and no yield), so remove them
georef.only <- raster::intersect(boundary, strips)
#GB
map_yield(d2015, area.harvested, georef.only,
extract_georef_field_and_strip(NULL, c(6), c(1,4,5,6,7,8), georef.only),
harvest.year, "GB")

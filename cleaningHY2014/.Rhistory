d <- read.csv("Input/HY2014GB_aggregate_all_data_171122.csv")
factors(d)
# Author: Bryan Carlson
# Contact: bryan.carlson@ars.usda.gov
# Purpose: Calculate relative yields using "average" normalization method bounded by strips
# ---- Setup ----
library(rgdal)
library(geojsonio)
library(jsonlite)
library(spatialEco)
d <- read.csv("Input/HY2014GB_aggregate_all_data_171122.csv")
refPoints <- geojson_read("Input/CookEast_GeoreferencePoints_171117.json", what = "sp")
refPoints <- geojson_read("Input/CookEast_GeoreferencePoints_171117.json", what = "sp")
source("C:/Dev/Projects/CookEastPlantHandHarvest/R/cleaningHY2014/Script.R", echo = TRUE, encoding = "Windows-1252")
WGS84 <- CRS("+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0")
y <- read.csv("Input/HY2014GB_aggregate_all_data_171122.csv")
refPoints <- geojson_read("Input/CookEast_GeoreferencePoints_171117.json", what = "sp")
# Convert csv gain mass data to spatial points and specify the datum
ysp <- SpatialPoints(y[, 6:5], proj4string = WGS84)
plot(ref)
plot(refPoints)
df <- refPoints@data
df[df$Strip==6 & df$Field=="A",]$Crop = "SW"
df$Crop
df[df$Strip==6 & df$Field=="A",]$Crop = "SW"
t <- df[df$Strip == 6 & df$Field == "A",]
t
df["Crop"]
df <- df$Crop
df[df$Strip==6 & df$Field=="A",]$Crop = "SW"
df <- df$Crop <- NA
df[df$Strip==6 & df$Field=="A",]$Crop = "SW"
df <- refPoints@data
# Set crops
df <- df$Crop <- NA
df[df$Strip==6 & df$Field=="A",]$Crop = "SW"
df <- refPoints@data
df[df$Strip == 6 & df$Field == "A",]
df[df$Strip == 6 & df$Field == "A",]$Crop
df[df$Strip == 6 & df$Field == "A",]$Crop = "SW"
t <- df[df$Strip == 6 & df$Field == "A",]
t$Crop
t
df$Crop <- NA
df
t <- df[df$Strip == 6 & df$Field == "A",]$Crop
t
t <- df[df$Strip == 6 & df$Field == "A",]
t
t$Crop = "SW"
t
df <- refPoints@data
# Set crops
df$Crop <- NA
df[df$Strip==6 & df$Field=="A",]$Crop = "SW"
df
df <- refPoints@data
# Set crops
df$Crop <- NA
df[df$Strip == 6 & df$Field == "A",]$Crop = "SW"
df[df$Strip == 5 & df$Field == "A",]$Crop = "SW"
df[df$Strip == 4 & df$Field == "A",]$Crop = "SL"
df[df$Strip == 3 & df$Field == "A",]$Crop = "SL"
df[df$Strip == 2 & df$Field == "A",]$Crop = "SL"
df[df$Strip == 1 & df$Field == "A",]$Crop = "SL"
df[df$Strip == 6 & df$Field == "B",]$Crop = "WW"
df[df$Strip == 5 & df$Field == "B",]$Crop = "WW"
df[df$Strip == 4 & df$Field == "B",]$Crop = "WW"
df[df$Strip == 3 & df$Field == "B",]$Crop = "WW"
df[df$Strip == 2 & df$Field == "B",]$Crop = "WW"
df[df$Strip == 1 & df$Field == "B",]$Crop = "WW"
df[df$Strip == 1 & df$Field == "C",]$Crop = "SW"
df[df$Strip == 2 & df$Field == "C",]$Crop = "SL"
df[df$Strip == 3 & df$Field == "C",]$Crop = "SB"
df[df$Strip == 4 & df$Field == "C",]$Crop = "WW"
df[df$Strip == 5 & df$Field == "C",]$Crop = "SW"
df[df$Strip == 6 & df$Field == "C",]$Crop = "SW"
df[df$Strip == 7 & df$Field == "C",]$Crop = "SW"
df[df$Strip == 8 & df$Field == "C",]$Crop = "SW"
DF
df
write.csv("Output/HY2014_Crops.csv")
write.csv("Output/HY2014_Crops.csv")
write.csv(df, "Output/HY2014_Crops.csv")
refPoints@data = df
write.csv(refPoints, "Output/HY2014_Crops.csv")
